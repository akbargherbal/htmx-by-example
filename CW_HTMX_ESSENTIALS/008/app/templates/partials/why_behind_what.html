<!-- Content generated/inserted by enhance_courseware.py -->
<div class="text-base md:text-lg">
  <h2 class="text-3xl lg:text-4xl font-bold text-white mb-6">
    The "Why" Behind the "What": Advanced HTMX Concepts
  </h2>
  <div x-data="{ openAccordion: 1 }" class="space-y-3 text-left">
    <details class="bg-slate-900 p-4 rounded-lg" :open="openAccordion === 1">
      <summary
        @click.prevent="openAccordion = (openAccordion === 1) ? null : 1"
        class="font-semibold text-lg lg:text-xl text-indigo-400 cursor-pointer list-none flex justify-between items-center"
      >
        <span>Why handle non-2xx HTTP status codes?</span>
        <span
          class="text-slate-500 text-sm transform transition-transform"
          :class="{ 'rotate-180': openAccordion === 1 }"
          >▼</span
        >
      </summary>
      <div class="mt-3 text-slate-300 space-y-2">
        <p>
          <strong>The Problem:</strong> Traditionally, handling AJAX errors requires client-side logic. You'd check `response.status`, and if it's an error (like 404 Not Found or 403 Forbidden), you'd have to write separate JavaScript code to parse the error and manually insert a message into the DOM.
        </p>
        <p>
          <strong>The HTMX Solution:</strong> HTMX simplifies this dramatically. If the server responds with an error status code (like 4xx or 5xx) but the response body contains HTML, HTMX will automatically swap that HTML into the target element, just as it would with a successful 200 OK response. This lets your server control the error UI completely, without any custom client-side error-handling scripts.
        </p>
      </div>
    </details>
    <details class="bg-slate-900 p-4 rounded-lg" :open="openAccordion === 2">
      <summary
        @click.prevent="openAccordion = (openAccordion === 2) ? null : 2"
        class="font-semibold text-lg lg:text-xl text-indigo-400 cursor-pointer list-none flex justify-between items-center"
      >
        <span>Why use the `HX-Redirect` header?</span>
        <span
          class="text-slate-500 text-sm transform transition-transform"
          :class="{ 'rotate-180': openAccordion === 2 }"
          >▼</span
        >
      </summary>
      <div class="mt-3 text-slate-300 space-y-2">
        <p>
          <strong>The Problem:</strong> Sometimes an action on a small part of a page must trigger a full-page reload to a new location. For example, accessing a restricted area might need to force a redirect to a payment or login page. With vanilla AJAX, the client-side code must detect this condition and then execute `window.location.href = '...'`.
        </p>
        <p>
          <strong>The HTMX Solution:</strong> The server can take control of navigation. By including an `HX-Redirect` header in its response with a URL as the value, it instructs HTMX to perform a client-side redirect to that URL. The button that triggers this needs no special attributes; HTMX handles the redirect automatically, simplifying the frontend logic.
        </p>
      </div>
    </details>
    <details class="bg-slate-900 p-4 rounded-lg" :open="openAccordion === 3">
      <summary
        @click.prevent="openAccordion = (openAccordion === 3) ? null : 3"
        class="font-semibold text-lg lg:text-xl text-indigo-400 cursor-pointer list-none flex justify-between items-center"
      >
        <span>Why use `hx-push-url="true"`?</span>
        <span
          class="text-slate-500 text-sm transform transition-transform"
          :class="{ 'rotate-180': openAccordion === 3 }"
          >▼</span
        >
      </summary>
      <div class="mt-3 text-slate-300 space-y-2">
        <p>
          <strong>The Problem:</strong> When you update page content with AJAX, the browser's URL in the address bar doesn't change. This breaks the back button, history, and the ability to bookmark or share a link to the application's current state. Managing this manually requires using the complex `history.pushState` API.
        </p>
        <p>
          <strong>The HTMX Solution:</strong> By adding `hx-push-url="true"`, you tell HTMX to push the URL from the `hx-post` or `hx-get` request into the browser's history and address bar. This keeps the UI in sync with the URL, creating a seamless user experience that feels like a traditional multi-page application, but with the performance of AJAX.
        </p>
      </div>
    </details>
  </div>
</div>
<button
  @click="conceptsModalOpen = false"
  class="absolute top-4 right-4 text-slate-500 hover:text-slate-300 text-3xl font-light"
>
  ×
</button>